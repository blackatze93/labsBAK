{% extends 'base.html.twig' %}
{% form_theme formulario 'form/fields.html.twig' %}

{% block title %}Nueva Evento{% endblock %}
{% block encabezado %}Nueva Evento{% endblock %}

{% block article %}
    {{ form_start(formulario) }}
    {% if not formulario.vars.valid %}
        <script>
            notificacion('Hay errores en el formulario', 'error');
        </script>
    {% endif %}
    <div class="form-group">
        {{ form_label(formulario.lugar) }}
        {{ form_widget(formulario.lugar, {'attr' : {'class' : 'form-control'}}) }}
        <span class="text-danger">{{ form_errors(formulario.lugar) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.fecha) }}
        <div class='input-group'>
            {{ form_widget(formulario.fecha, {'attr' : {'class' : 'form-control'}}) }}
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>
        <span class="text-danger">{{ form_errors(formulario.fecha) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.horaInicio) }}
        <div class='input-group'>
            {{ form_widget(formulario.horaInicio, {'attr' : {'class' : 'form-control'}}) }}
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-time"></span>
            </span>
        </div>
        <span class="text-danger">{{ form_errors(formulario.horaInicio) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.horaFin) }}
        <div class='input-group'>
            {{ form_widget(formulario.horaFin, {'attr' : {'class' : 'form-control'}}) }}
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-time"></span>
            </span>
        </div>
        <span class="text-danger">{{ form_errors(formulario.horaFin) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.semanas) }}
        {{ form_widget(formulario.semanas, {'attr' : {'class' : 'form-control'}}) }}
        <span class="text-danger">{{ form_errors(formulario.semanas) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.estado) }}
        {{ form_widget(formulario.estado, {'attr' : {'class' : 'form-control'}}) }}
        <span class="text-danger">{{ form_errors(formulario.estado) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.materia) }}
        {{ form_widget(formulario.materia, {'attr' : {'class' : 'form-control'}}) }}
        <span class="text-danger">{{ form_errors(formulario.materia) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.grupo) }}
        {{ form_widget(formulario.grupo, {'attr' : {'class' : 'form-control'}}) }}
        <span class="text-danger">{{ form_errors(formulario.grupo) }}</span>
    </div>
    <div class="form-group">
        {{ form_label(formulario.observaciones) }}
        {{ form_widget(formulario.observaciones, {'attr' : {'class' : 'form-control'}}) }}
        <span class="text-danger">{{ form_errors(formulario.observaciones) }}</span>
    </div>
    <div class="text-center">
        {{ form_widget(formulario.crear, {'attr' : {'class' : 'btn btn-success'}, 'label' : '<span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Crear'}) }}
        {{ form_widget(formulario.restablecer, {'attr' : {'class' : 'btn btn-warning'}, 'label' : '<span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Restablecer'}) }}
        <a href="{{ path('evento_index') }}" class="btn btn-primary">
            <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
            Lista
        </a>
    </div>

    {{ form_end(formulario) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $(function() {
            try {
                $("#evento_fecha").daterangepicker({
                    startDate: moment().startOf('day'),
                    singleDatePicker: true,
                    showDropdowns: true,
                    locale: {
                        format: "YYYY-MM-DD",
                        applyLabel: "Aplicar",
                        cancelLabel: "Cancelar",
                        daysOfWeek: moment.weekdaysMin(),
                        monthNames: moment.monthsShort(),
                        firstDay: moment.localeData().firstDayOfWeek()
                    }
                });

                $("#evento_horaInicio, #evento_horaFin").timepicker({
                    'className' : 'form-control',
                    'minTime' : '06:00',
                    'maxTime' : '22:00',
                    'scrollDefault': 'now',
                    'timeFormat': 'H:i'
                });
            } catch (e) {
                console.log(e.message);
            }
        });
    </script>
{% endblock %}
